<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docker å­¦ä¹ ç¬”è®°ç®€åŒ–ç‰ˆ - æˆ‘çš„ä¸ªäººåšå®¢</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/markdown.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>æˆ‘çš„ä¸ªäººåšå®¢</h1>
            <nav>
                <span><a href="../index.html" class="no-underline">é¦–é¡µ</a></span>
            </nav>
        </header>

        <main>
            <div class="messages-list">
                <div class="messages-header">
                    <h3>ğŸ³ Docker å­¦ä¹ ç¬”è®°</h3>
                    <a href="../index.html" class="btn">è¿”å›é¦–é¡µ</a>
                </div>

                <div class="message-item">
                    <div class="message-header">
                        <span class="username">æŠ€æœ¯åˆ†äº«</span>
                        <span class="time">2025-12-20</span>
                    </div>
                    <div class="message-content">
                        <div class="markdown-content">
                            <h2>ğŸš€ å®‰è£…é…ç½®</h2>
                            <pre><code class="language-bash"># å®‰è£…
apt install docker.io

# æ¢æº
tee /etc/docker/daemon.json &lt;&lt;-'EOF'
{
    &quot;registry-mirrors&quot;: [
     &quot;https://docker.m.daocloud.io&quot;,
     &quot;https://docker.imgdb.de&quot;,
     &quot;https://docker-0.unsee.tech&quot;,
     &quot;https://docker.hlmirror.com&quot;,
     &quot;https://docker.1ms.run&quot;,
     &quot;https://func.ink&quot;,
     &quot;https://lispy.org&quot;,
     &quot;https://docker.xiaogenban1993.com&quot;
    ]
}
EOF

# é‡å¯æœåŠ¡
systemctl daemon-reload
systemctl restart docker</code></pre>
                            <hr>
                            <h2>âš¡ æ ¸å¿ƒå‘½ä»¤</h2>
                            <h3>ğŸ“¦ é•œåƒæ“ä½œ</h3>
                            <pre><code class="language-bash">docker images                    # æŸ¥çœ‹é•œåƒ
docker search é•œåƒå             # æœç´¢é•œåƒ
docker pull é•œåƒå:æ ‡ç­¾          # æ‹‰å–é•œåƒ
docker rmi é•œåƒID                # åˆ é™¤é•œåƒ
docker rmi `docker images -q`    # åˆ é™¤æ‰€æœ‰é•œåƒ</code></pre>
                            <h3>ğŸ—ï¸ å®¹å™¨æ“ä½œ</h3>
                            <pre><code class="language-bash">docker ps                        # æŸ¥çœ‹è¿è¡Œä¸­å®¹å™¨
docker ps -a                     # æŸ¥çœ‹æ‰€æœ‰å®¹å™¨
docker run -it --name=å®¹å™¨å é•œåƒå /bin/bash    # äº¤äº’å¼å¯åŠ¨
docker run -di --name=å®¹å™¨å é•œåƒå              # åå°å¯åŠ¨
docker exec -it å®¹å™¨å /bin/bash  # è¿›å…¥å®¹å™¨
docker stop/start å®¹å™¨å          # åœæ­¢/å¯åŠ¨å®¹å™¨
docker rm å®¹å™¨å                  # åˆ é™¤å®¹å™¨
docker cp æ–‡ä»¶ å®¹å™¨å:è·¯å¾„         # å¤åˆ¶æ–‡ä»¶</code></pre>
                            <h3>ğŸ“‚ å¸¸ç”¨å‚æ•°</h3>
                            <ul>
                                <li><code>-i</code>: äº¤äº’å¼</li>
                                <li><code>-t</code>: ç»ˆç«¯</li>
                                <li><code>-d</code>: åå°è¿è¡Œ</li>
                                <li><code>-p 8080:80</code>: ç«¯å£æ˜ å°„</li>
                                <li><code>-v /host:/container</code>: ç›®å½•æŒ‚è½½</li>
                                <li><code>--name</code>: å®¹å™¨åç§°</li>
                                <li><code>-e KEY=VALUE</code>: ç¯å¢ƒå˜é‡</li>
                            </ul>
                            <hr>
                            <h2>ğŸŒ åº”ç”¨éƒ¨ç½²</h2>
                            <h3>ğŸ—„ï¸ æ•°æ®åº“</h3>
                            <pre><code class="language-bash"># MySQL
docker run -di --name=mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=å¯†ç  mysql:5.7

# Redis
docker run -di --name=redis -p 6379:6379 redis

# PostgreSQL
docker run -di --name=postgres -p 5432:5432 -e POSTGRES_PASSWORD=å¯†ç  postgres:13</code></pre>
                            <h3>ğŸŒ WebæœåŠ¡</h3>
                            <pre><code class="language-bash"># Nginx
docker run -di --name=nginx -p 80:80 -v /usr/local/nginx:/etc/nginx nginx

# Tomcat
docker run -di --name=tomcat -p 8080:8080 tomcat:9</code></pre>
                            <hr>
                            <h2>ğŸ“ Dockerfile</h2>
                            <h3>ğŸ—ï¸ åŸºæœ¬ç»“æ„</h3>
                            <pre><code class="language-dockerfile">FROM node:16-alpine          # åŸºç¡€é•œåƒ
WORKDIR /app                 # å·¥ä½œç›®å½•
COPY package*.json ./        # å¤åˆ¶æ–‡ä»¶
RUN npm install              # å®‰è£…ä¾èµ–
COPY . .                     # å¤åˆ¶ä»£ç 
EXPOSE 3000                  # æš´éœ²ç«¯å£
CMD [&quot;node&quot;, &quot;app.js&quot;]       # å¯åŠ¨å‘½ä»¤</code></pre>
                            <h3>ğŸ“‹ å¸¸ç”¨æŒ‡ä»¤</h3>
                            <ul>
                                <li><code>FROM</code>: åŸºç¡€é•œåƒ</li>
                                <li><code>WORKDIR</code>: å·¥ä½œç›®å½•</li>
                                <li><code>COPY</code>: å¤åˆ¶æ–‡ä»¶</li>
                                <li><code>ADD</code>: å¤åˆ¶æ–‡ä»¶(æ”¯æŒè§£å‹)</li>
                                <li><code>RUN</code>: æ‰§è¡Œå‘½ä»¤</li>
                                <li><code>ENV</code>: ç¯å¢ƒå˜é‡</li>
                                <li><code>EXPOSE</code>: æš´éœ²ç«¯å£</li>
                                <li><code>CMD</code>: å¯åŠ¨å‘½ä»¤</li>
                                <li><code>ENTRYPOINT</code>: å…¥å£ç‚¹</li>
                            </ul>
                            <h3>ğŸ”§ æ„å»ºé•œåƒ</h3>
                            <pre><code class="language-bash">docker build -t é•œåƒå:æ ‡ç­¾ .
docker build -f Dockerfileæ–‡ä»¶ -t é•œåƒå .</code></pre>
                            <hr>
                            <h2>ğŸ™ Docker Compose</h2>
                            <h3>ğŸ“„ åŸºæœ¬æ ¼å¼</h3>
                            <pre><code class="language-yaml">version: '3.8'

services:
  web:
    build: .
    ports:
      - &quot;3000:3000&quot;
    environment:
      - NODE_ENV=production
    depends_on:
      - db
  
  db:
    image: postgres:13
    environment:
      - POSTGRES_PASSWORD=å¯†ç 
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  postgres_data:</code></pre>
                            <h3>âš¡ å¸¸ç”¨å‘½ä»¤</h3>
                            <pre><code class="language-bash">docker-compose up -d           # åå°å¯åŠ¨
docker-compose down             # åœæ­¢åˆ é™¤
docker-compose up -d --build    # é‡æ–°æ„å»ºå¯åŠ¨
docker-compose logs             # æŸ¥çœ‹æ—¥å¿—
docker-compose exec web bash    # è¿›å…¥å®¹å™¨
docker-compose ps               # æŸ¥çœ‹çŠ¶æ€</code></pre>
                            <hr>
                            <h2>ğŸ’¾ å¤‡ä»½è¿ç§»</h2>
                            <pre><code class="language-bash"># å®¹å™¨ä¿å­˜ä¸ºé•œåƒ
docker commit å®¹å™¨å æ–°é•œåƒå

# å¯¼å‡ºé•œåƒ
docker save -o é•œåƒ.tar é•œåƒå

# å¯¼å…¥é•œåƒ
docker load -i é•œåƒ.tar</code></pre>
                            <h2>ğŸ“Docker-compose V2</h2>
                            <p>æœ€è¿‘ä¸€ç›´æ‰“ç®—æŠŠç½‘ç«™æ‰“åŒ…ï¼Œç”¨docker-composeéƒ¨ç½²ï¼Œå‘ç°docker-composeæ›´æ–°äº†äºæ˜¯è¡¥ä¸€ä¸ªubuntuå®‰è£…docker-compose v2çš„æ­¥éª¤</p>
                            <pre><code class="language-bash"># 1. ä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆ Compose V2ï¼ˆLinux x86_64 æ¶æ„ï¼Œé€‚é…ç»å¤§å¤šæ•°æœåŠ¡å™¨ï¼‰
sudo curl -SL https://github.com/docker/compose/releases/latest/download/docker-compose-linux-x86_64 -o /usr/local/bin/docker-compose

# 2. ç»™äºŒè¿›åˆ¶æ–‡ä»¶æ·»åŠ æ‰§è¡Œæƒé™
sudo chmod +x /usr/local/bin/docker-compose

# 3. ï¼ˆå¯é€‰ï¼‰åˆ›å»ºè½¯é“¾æ¥ï¼Œç¡®ä¿ç³»ç»Ÿèƒ½å…¨å±€è¯†åˆ«å‘½ä»¤ï¼ˆéƒ¨åˆ†ç³»ç»Ÿéœ€è¦ï¼‰
sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose

# 4. éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼ˆæ˜¾ç¤º V2 ç‰ˆæœ¬å³å¯ï¼Œæ¯”å¦‚ v2.29.2ï¼‰
docker-compose --version</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</body>

</html>